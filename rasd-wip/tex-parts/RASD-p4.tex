\chapter{System model}

\section{Scenarios}

\subsection{Passenger sign up, real time request, taxi movement}
Bob wants to go to the theater. He downloads the \mts{} app on his smartphone, he opens it and he finds the passenger sign up page. He inserts his name and surname, his address, and his personal citizen ID. After receiving confirmation of a successful operation, he logs in by tapping on the corresponding button. He finds three options: \emph{call a taxi now}, \emph{reserve a taxi for later}, \emph{view reservation history}. He decides to tap the \emph{call a taxi now} function. He finds a form where he inserts the destination address and the number of passengers. The system notifies him to turn his GPS on if he wants to call a taxi to his current location, otherwise he can manually insert a starting address. He taps \emph{confirm} and the system answers by confirming back and sending him the estimated waiting time.

Charlie is a taxi driver already logged in the system, who has given his availability by tapping on the \emph{driver available} button on his personal page in the app. He receives notification that he has been assigned to picking up Bob. He accepts by tapping on the big red \emph{accept} button on his screen, he revs up and goes to the given starting address.

After arriving at destination, Charlie sends Bob on his way and notifies the system that he is available again. The system tells him in which zone of the city he will have to move to keep general widespread taxi coverage.

\subsection{New reservation,  previous reservation modification}
Tom wants to go to the airport at 4.30 AM. Since he is a very anxious person, one week in advance he logs in to \mts{}, chooses the reservation function from his personal page and reserves a ride for the right day and time and destination and starting address. He is relieved in seeing that the system has confirmed his reservation.
Three days later, his anxiety growing, he thinks he should change the reservation in order to be at the airport one hour before what he had planned. He logs again in \mts{} and he chooses the \emph{reservation history} function: the system shows him all of his previous reservations, which in this case is just the one he had made three days earlier. He taps the reservation entry and it pops out the option to \emph{modify} or \emph{delete} it. He carefully taps on \emph{modify} (heavens forbid he deletes it) and he is prompted to insert again all necessary information. He sighs in relief when the system confirms again that everything went well.
Unfortunately, two hours before the scheduled arrival of his taxi (Tom is well awake, least he forgets something for the journey), the system sends him notification that his request cannot be fulfilled due to unexpected events arising outside the sphere of influence of the taxi company. Tom is somewhat taken aback, but, after all, he expected nothing less.

\subsection{Driver sign up and availability, assignment rejection, taxi queque handling}
Eve is a taxi driver. She downloads the \mts{} app and signs up as a taxi driver as per company policy. She is prompted to insert her name and surname, her address, her personal citizen ID, her license number and her car's plate number. The system checks that she is indeed a real, active taxi driver and that she is on the company payroll. After receiving confirmation of a successful operation, she logs in by tapping on the corresponding button.

After going to work one morning, she logs and signals her availability by tapping on the corresponding button on her personal page. Since it's the first time in the day, the app firstly interfaces with her car's GPS tracker, and goes then in waiting mode. After a while, her app comes to life and notifies her that she has ten minutes to pick up a passenger at a certain place. She is busy having a fat cream \emph{bombolone} for breakfast, so she declines.

The system receives Eve's reject and moves her at the end of her queue. At the same time, it notifies the next-in-line.

\section{Use cases}

\section{Alloy model}
The following code is the Alloy modelization of the system that has been described in terms of requirements and goals in the previous sections.
\alloyfile{alloy/Alloymodel.als}